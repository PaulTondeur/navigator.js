/*! navigator-js - v0.3.2 - 2013-10-17
* Copyright (c) 2013 Bigger Boat; 
*/
this.navigatorjs=this.navigatorjs||{},function(){var t=function(){this._responders=[]};t.prototype={getLength:function(){return this._responders.length},isBusy:function(){return this.getLength()>0},hasResponder:function(t){return-1!=this._responders.indexOf(t)},addResponder:function(t){this._responders.push(t)},addResponders:function(t){t&&t instanceof Array&&t.length&&(this._responders=this._responders.concat(t))},takeOutResponder:function(t){var a=this._responders.indexOf(t);return-1!=a?(this._responders.splice(a,1),!0):!1},reset:function(){this._responders.length>0,this._responders=[]}},navigatorjs.AsynchResponders=t}(),this.navigatorjs=this.navigatorjs||{},function(){var t=function(t){navigatorjs.utils.AutoBind(this,this),this._initialize(t)};t.MAX_HISTORY_LENGTH=100,t.DIRECTION_BACK=-1,t.DIRECTION_NORMAL=0,t.DIRECTION_FORWARD=1,t.prototype={_navigator:null,_history:null,_historyPosition:0,_navigationDirection:t.DIRECTION_NORMAL,maxLength:t.MAX_HISTORY_LENGTH,_initialize:function(t,a){a&&(this.maxLength=a.maxLength||this.maxLength),this._history=[],this._navigator=t,this._navigator.on(navigatorjs.NavigatorEvent.STATE_CHANGED,this._handleStateChange)},back:function(a){return this._historyPosition==this._history.length-1?!1:(a=a||1,this._historyPosition=Math.min(this._history.length-1,this._historyPosition+a),this._navigationDirection=t.DIRECTION_BACK,this._navigateToCurrentHistoryPosition(),!0)},forward:function(a){return 0===this._historyPosition?!1:(a=a||1,this._historyPosition=Math.max(0,this._historyPosition-a),this._navigationDirection=t.DIRECTION_FORWARD,this._navigateToCurrentHistoryPosition(),!0)},getPreviousState:function(t){if(0===this._history.length||this._historyPosition==Math.max(0,this._history.length-1))return null;t=t||1;var a=Math.min(this._history.length-1,Math.max(0,this._historyPosition+t));return this._history[a]},getNextState:function(t){if(0===this._history.length||0===this._historyPosition)return null;t=t||1;var a=Math.max(0,this._historyPosition-t);return this._history[a]},getCurrentState:function(){return this._history[this._historyPosition]||null},clearHistory:function(){this._history=[],this._historyPosition=1},all:function(){return this._history},getStateByPosition:function(t){return 0>t||t>this._history.length-1?null:this._history[t]},getPositionByState:function(t){return this.getPositionByPath(t.getPath())},getPositionByPath:function(t){for(var a=this.getLength(),i=0;a>i;i++)if(this._history[i].getPath()==t)return i;return!1},getLength:function(){return this._history.length},_navigateToCurrentHistoryPosition:function(){var t=this._history[this._historyPosition];this._navigator.request(t)},_handleStateChange:function(a,i){var n=i.state;switch(this._navigationDirection){case t.DIRECTION_BACK:this._navigationDirection=t.DIRECTION_NORMAL;break;case t.DIRECTION_NORMAL:this._history.splice(0,this._historyPosition),this._history.unshift(n),this._historyPosition=0,this._history.length=Math.min(this._history.length,this.maxLength);break;case t.DIRECTION_FORWARD:this._navigationDirection=t.DIRECTION_NORMAL}}},navigatorjs.History=t}(jQuery),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.NavigationBehaviors={},this.navigatorjs.NavigationBehaviors.SHOW="show",this.navigatorjs.NavigationBehaviors.HIDE="hide",this.navigatorjs.NavigationBehaviors.UPDATE="update",this.navigatorjs.NavigationBehaviors.SWAP="swap",this.navigatorjs.NavigationBehaviors.VALIDATE="validate",this.navigatorjs.NavigationBehaviors.AUTO="auto",this.navigatorjs.NavigationBehaviors.ALL_AUTO=["show","update","swap","validate"],this.navigatorjs=this.navigatorjs||{},this.navigatorjs.NavigationResponderBehaviors={},this.navigatorjs.NavigationResponderBehaviors.IHasStateInitialization={name:"IHasStateInitialization",methods:["initializeByNavigator"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidation={name:"IHasStateValidation",methods:["validate"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidationAsync={name:"IHasStateValidationAsync","extends":["IHasStateValidation"],methods:["prepareValidation"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidationOptional={name:"IHasStateValidationOptional","extends":["IHasStateValidation"],methods:["willValidate"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidationOptionalAsync={name:"IHasStateValidationOptionalAsync","extends":["IHasStateValidationAsync","IHasStateValidationOptional"],methods:[]},this.navigatorjs.NavigationResponderBehaviors.IHasStateRedirection={name:"IHasStateRedirection","extends":["IHasStateValidation"],methods:["redirect"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateSwap={name:"IHasStateSwap",methods:["willSwapToState","swapOut","swapIn"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateTransition={name:"IHasStateTransition",methods:["transitionIn","transitionOut"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateUpdate={name:"IHasStateUpdate",methods:["updateState"]},this.navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface=function(t,a){if(void 0==t.navigatorBehaviors||!t.navigatorBehaviors instanceof Array)return!1;var i,n,s=navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain(a),e=navigatorjs.NavigationResponderBehaviors.getInterfaceMethods(s),r=e.length;for(i=0;r>i;i++)if(n=e[i],void 0==t[n]||"function"!=typeof t[n])return!1;return!0},this.navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain=function(t,a){var i,n,s,e,r=a||[],o=navigatorjs.NavigationResponderBehaviors[t];if(void 0==o||"object"!=typeof o)return r;if(r.push(t),i=o["extends"],void 0==i)return r;for(e=i.length,s=0;e>s;s++)n=i[s],-1==r.indexOf(n)&&navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain(n,r);return r},this.navigatorjs.NavigationResponderBehaviors.getInterfaceMethods=function(t){if(void 0==t||!t instanceof Array)return[];var a,i,n,s,e,r,o,h=[],g=t.length,v=[];for(i=0;g>i;i++)a=t[i],navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain(a,h);for(g=h.length,i=0;g>i;i++)if(a=h[i],n=navigatorjs.NavigationResponderBehaviors[a],s=n.methods,void 0!=n&&"object"==typeof n&&void 0!=s&&s instanceof Array)for(r=s.length,e=0;r>e;e++)o=s[e],-1==v.indexOf(o)&&v.push(o);return v},this.navigatorjs=this.navigatorjs||{},function(){var t=function(t){this._path="",t instanceof Array?this.setSegments(t):this.setPath(t)};t.make=function(t){return t instanceof navigatorjs.NavigationState?t:new navigatorjs.NavigationState(t)},t.prototype={setPath:function(t){return this._path="/"+t.toLowerCase()+"/",this._path=this._path.replace(RegExp("[^-_/A-Za-z0-9* ]","g"),""),this._path=this._path.replace(RegExp("/+","g"),"/"),this._path=this._path.replace(/\s+/g,"-"),this},getPath:function(){return this._path},setSegments:function(t){this.setPath(t.join("/"))},getSegments:function(){var t=this._path.split("/");return t.pop(),t.shift(),t},getSegment:function(t){return this.getSegments()[t]},getFirstSegment:function(){return this.getSegment(0)},getLastSegment:function(){var t=this.getSegments();return this.getSegment(t.length-1)},contains:function(a){var i,n,s,e=t.make(a),r=e.getSegments(),o=this.getSegments();if(r.length>o.length)return!1;for(s=0;r.length>s;s++)if(i=r[s],n=o[s],"*"!==i&&"*"!==n&&i!==n)return!1;return!0},equals:function(a){var i=t.make(a),n=this.subtract(i);return null===n?!1:0===n.getSegments().length},subtract:function(a){var i,n=t.make(a);return this.contains(n)?(i=this.getSegments(),i.splice(0,n.getSegments().length),new navigatorjs.NavigationState(i)):null},append:function(a){var i=a;return a instanceof t&&(i=a.getPath()),this.setPath(this._path+i)},prepend:function(a){var i=a;return a instanceof t&&(i=a.getPath()),this.setPath(i+this._path)},hasWildcard:function(){return-1!=this.getPath().indexOf("*")},mask:function(a){var i,n=t.make(a),s=this.getSegments(),e=n.getSegments(),r=Math.min(s.length,e.length);for(i=0;r>i;i++)"*"===s[i]&&(s[i]=e[i]);return new navigatorjs.NavigationState(s)},clone:function(){return new navigatorjs.NavigationState(this._path)}},navigatorjs.NavigationState=t}(),this.navigatorjs=this.navigatorjs||{},function(){var t=null,a={},i={},n={},s={},e=null,r=null,o=null,h=!1,g=null,v=null,u=null,l=null,c=null,d=null,f=null,p=null,S=null,_=!1,j=!1,I=!1,N=0,m=function(a,i,n,s){if(!y(a,i,n,s)){var e,r,o=navigatorjs.NavigationState.make(n).getPath();switch(s){case navigatorjs.NavigationBehaviors.SHOW:r="IHasStateTransition",e=g.showByPath[o]=g.showByPath[o]||[];break;case navigatorjs.NavigationBehaviors.HIDE:r="IHasStateTransition",e=g.hideByPath[o]=g.hideByPath[o]||[];break;case navigatorjs.NavigationBehaviors.VALIDATE:r="IHasStateValidation",e=g.validateByPath[o]=g.validateByPath[o]||[];break;case navigatorjs.NavigationBehaviors.UPDATE:r="IHasStateUpdate",e=g.updateByPath[o]=g.updateByPath[o]||[];break;case navigatorjs.NavigationBehaviors.SWAP:r="IHasStateSwap",e=g.swapByPath[o]=g.swapByPath[o]||[];break;default:throw Error("Unknown behavior: "+s)}if(!navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(i,r))throw Error("Responder "+i+" should implement "+r+" to respond to "+s);if(a){if(!(0>e.indexOf(i)))return;e.push(i),void 0==i.__navigatorjs&&(N++,i.__navigatorjs={id:N},v[i.__navigatorjs.id]=i),u[i.__navigatorjs.id]=u[i.__navigatorjs.id]||navigatorjs.transition.TransitionStatus.UNINITIALIZED}else{var h=e.indexOf(i);if(!(h>=0))return;e.splice(h,1),delete u[i.__navigatorjs.id],delete v[i.__navigatorjs.id],"IHasStateSwap"==r&&g.swappedBefore[i]&&delete g.swappedBefore[i]}t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:u,respondersByID:v})}},y=function(t,a,i,n){if(!a)throw Error("add: responder is null");var s,e;if(i instanceof Array){for(e=i.length,s=0;e>s;s++)m(t,a,i[s],n);return!0}if(n=n||navigatorjs.NavigationBehaviors.AUTO,n==navigatorjs.NavigationBehaviors.AUTO){for(e=navigatorjs.NavigationBehaviors.ALL_AUTO.length,s=0;e>s;s++)try{m(t,a,i,navigatorjs.NavigationBehaviors.ALL_AUTO[s])}catch(r){}return!0}return!1},w=function(t,a){if(!o)throw Error("No default state set. Call start() before the first request!");if(t.getPath()!=o.getPath()||o.hasWildcard())if(I&&j&&!_)T(t);else if(B(t,!0,a))T(t);else if(p&&p.isBusy());else if(a&&I);else if(S)this.request(S);else if(e)A(e);else{if(t.hasWildcard())throw Error("Check wildcard masking: "+t.getPath());if(!o)throw Error("First request is invalid: "+t.getPath());T(o)}else T(o)},T=function(t){_=!1,j=!1,r=e,e=t,A(e),a.startTransition()},A=function(a){a!=r&&t.trigger(navigatorjs.NavigatorEvent.STATE_CHANGED,{statusByResponderID:u,respondersByID:v,state:e})};a.startTransition=function(){h=!0,t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STARTED),c=new navigatorjs.AsynchResponders,c.addResponders(a.transitionOut()),c.isBusy()||a.performUpdates()},a.transitionOut=function(){var a,n,s,e=R(),r=[];E(e);for(a in u)n=v[a],-1==e.indexOf(n)&&navigatorjs.transition.TransitionStatus.HIDDEN<u[a]&&u[a]<navigatorjs.transition.TransitionStatus.DISAPPEARING&&(u[a]=navigatorjs.transition.TransitionStatus.DISAPPEARING,r.push(n),n.transitionOut(new navigatorjs.transition.TransitionCompleteDelegate(n,navigatorjs.transition.TransitionStatus.HIDDEN,navigatorjs.NavigationBehaviors.HIDE,this,i).call));for(s=r.length;--s>=0;)u[r[s].__navigatorjs.id]==navigatorjs.transition.TransitionStatus.HIDDEN&&r.splice(s,1);return r.length>0&&t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:u,respondersByID:v}),r},a.performUpdates=function(){c.reset();var t,i,n,s,r;for(t in g.updateByPath)if(i=new navigatorjs.NavigationState(t),e.contains(i))for(n=g.updateByPath[t],E(n),s=0;n.length>s;s++)r=n[s],r.updateState(e.subtract(i),e);a.startTransitionIn()},a.startTransitionIn=function(){d=new navigatorjs.AsynchResponders,d.addResponders(a.transitionIn()),d.isBusy()||a.startSwapOut()},a.transitionIn=function(){var a,n,s,e=R(),r=[];for(E(e),s=0;e.length>s;s++)a=e[s],n=u[a.__navigatorjs.id],(navigatorjs.transition.TransitionStatus.APPEARING>n||n>navigatorjs.transition.TransitionStatus.SHOWN)&&(u[a.__navigatorjs.id]=navigatorjs.transition.TransitionStatus.APPEARING,r.push(a),a.transitionIn(new navigatorjs.transition.TransitionCompleteDelegate(a,navigatorjs.transition.TransitionStatus.SHOWN,navigatorjs.NavigationBehaviors.SHOW,this,i).call));for(s=r.length;--s>=0;)u[r[s].__navigatorjs.id]==navigatorjs.transition.TransitionStatus.SHOWN&&r.splice(s,1);return r.length>0&&t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:u,respondersByID:v}),r},a.startSwapOut=function(){f=new navigatorjs.AsynchResponders,f.addResponders(a.swapOut()),f.isBusy()||a.swapIn()},a.swapOut=function(){d.reset();var a,n,s,r,o,h,l=[];for(a in g.swapByPath)if(n=new navigatorjs.NavigationState(a),e.contains(n))for(s=g.swapByPath[a],E(s),o=0;s.length>o;o++)r=s[o],g.swappedBefore[r]&&(h=e.subtract(n),r.willSwapToState(h,e)&&(u[r.__navigatorjs.id]=navigatorjs.transition.TransitionStatus.SWAPPING,l.push(r),r.swapOut(new navigatorjs.TransitionCompleteDelegate(r,navigatorjs.transition.TransitionStatus.SHOWN,navigatorjs.transition.NavigationBehaviors.SWAP,this,i).call)));for(o=l.length;--o>=0;)u[l[o].__navigatorjs.id]==navigatorjs.transition.TransitionStatus.SHOWN&&l.splice(o,1);return l.length>0&&t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:u,respondersByID:v}),l},a.swapIn=function(){f.reset();var t,i,n,s,r,o;for(t in g.swapByPath)if(i=new navigatorjs.NavigationState(t),e.contains(i))for(n=g.swapByPath[t],E(n),o=0;n.length>o;o++)s=n[o],r=e.subtract(i),s.willSwapToState(r,e)&&(g.swappedBefore[s]=!0,s.swapIn(r,e));a.finishTransition()},a.finishTransition=function(){h=!1,t.trigger(navigatorjs.NavigatorEvent.TRANSITION_FINISHED)},i.notifyComplete=function(i,n,s){u[i.__navigatorjs.id]&&(u[i.__navigatorjs.id]=n,t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:u,respondersByID:v}));var e,r;switch(s){case navigatorjs.NavigationBehaviors.HIDE:e=c,r=a.performUpdates;break;case navigatorjs.NavigationBehaviors.SHOW:e=d,r=a.startSwapOut;break;case navigatorjs.NavigationBehaviors.SWAP:e=f,r=a.swapIn;break;default:throw Error("Don't know how to handle notification of behavior "+s)}e.isBusy()&&(e.takeOutResponder(i),e.isBusy()||r())},s.hasResponder=function(t){if(u[t.__navigatorjs.id])return!0;var a,i,n,s;for(n=0;g.all.length>n;n++)for(a=g.all[n],s=0;a.length>s;s++)if(i=a[s],i.indexOf(t)>=0)return!0;return!1},s.getStatusByResponderID=function(){return u},s.getRespondersByID=function(){return v},s.getStatus=function(t){return u[t.__navigatorjs.id]},s.getKnownPaths=function(){var t,a={},i=[];a[o.getPath()]=!0;for(t in g.showByPath)a[new navigatorjs.NavigationState(t).getPath()]=!0;for(t in a)i.push(t);return i.sort(),i},n.notifyValidationPrepared=function(t,a,i){p.takeOutResponder(t)&&(t.validate(a,i)?j=!0:(_=!0,navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(t,"IHasStateRedirection")&&(S=t.redirect(a,i))),p.isBusy()||w(i,!1))};var B=function(t,a,i){var s,e,r,h,v,u,l,a=void 0==a?!0:a,i=void 0==i?!0:i,c=t,d=!1,f=!1;if(c.hasWildcard())return!1;if(c.equals(o))return!0;i&&(I=!1,_=!1,j=!1,p=new navigatorjs.AsynchResponders),s=P(c);for(e in g.validateByPath)if(r=new navigatorjs.NavigationState(e),c.contains(r)){if(h=c.subtract(r),v=g.validateByPath[e],E(v),i){for(u=0;v.length>u;u++)l=v[u],(!navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationOptional")||l.willValidate(h,c))&&navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationAsync")&&(I=!0,p.addResponder(l),l.prepareValidation(h,c,new navigatorjs.transition.ValidationPreparedDelegate(l,h,c,this,n).call));if(I)return!1}for(u=0;v.length>u;u++)l=v[u],navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationAsync")||(!navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationOptional")||l.willValidate(h,c))&&(l.validate(h,c)?f=!0:(d=!0,a&&navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateRedirection")&&(S=l.redirect(h,c))))}return p.isBusy()?!1:d||_?!1:f||j?!0:s},P=function(t){var a;for(a in g.showByPath)if(new navigatorjs.NavigationState(a).equals(t))return!0;return!1},R=function(){var t,a,i,n=D(g.showByPath,e),s=D(g.hideByPath,e);for(t=0;s.length>t;t++)a=s[t],i=n.indexOf(a),i>=0&&n.splice(i,1);return n},E=function(t){var a,i;for(a=0;t.length>a;a++)i=t[a],u[i.__navigatorjs.id]==navigatorjs.transition.TransitionStatus.UNINITIALIZED&&navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(i,"IHasStateInitialization")&&(i.initializeByNavigator(),u[i.__navigatorjs.id]=navigatorjs.transition.TransitionStatus.INITIALIZED)},D=function(t,a){var i,n=[];for(i in t)a.contains(new navigatorjs.NavigationState(i))&&(n=n.concat(t[i]));return n},C=function(){navigatorjs.utils.AutoBind(this,this),t=$({}),e=null,g=new navigatorjs.ResponderLists,v={},u={},N=0};C.prototype={add:function(t,a,i){m(!0,t,a,i)},remove:function(t,a,i){m(!1,t,a,i)},registerRedirect:function(t,a){l=l||{},l[navigatorjs.NavigationState.make(t).getPath()]=navigatorjs.NavigationState.make(a)},start:function(t,a){o=navigatorjs.NavigationState.make(t||""),this.request(a||o)},request:function(a){if(null!=a){var i,n,s,r;if(i=navigatorjs.NavigationState.make(a),i.hasWildcard()&&(i=i.mask(e||o)),!e||e.getPath()!=i.getPath()){if(l)for(n in l)if(s=new navigatorjs.NavigationState(n),s.equals(i))return r=navigatorjs.NavigationState.make(l[n]),this.request(r),void 0;t.trigger(navigatorjs.NavigatorEvent.STATE_REQUESTED,{state:i}),S=null,w(i)}}},getCurrentState:function(){return e?e.clone():o?o.clone():null},isTransitioning:function(){return h},on:function(a,i){return t.on(a,i),this},off:function(a,i){return t.off(a,i),this},logResponders:function(){console.log(""+g)}},navigatorjs.Navigator=C}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.NavigatorEvent={},this.navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED="TRANSITION_STATUS_UPDATED",this.navigatorjs.NavigatorEvent.STATE_REQUESTED="STATE_REQUESTED",this.navigatorjs.NavigatorEvent.STATE_CHANGED="STATE_CHANGED",this.navigatorjs.NavigatorEvent.TRANSITION_STARTED="TRANSITION_STARTED",this.navigatorjs.NavigatorEvent.TRANSITION_FINISHED="TRANSITION_FINISHED",this.navigatorjs=this.navigatorjs||{},function(){var t=function(){this.validateByPath={},this.updateByPath={},this.swapByPath={},this.showByPath={},this.hideByPath={},this.swappedBefore={},this.all=[this.validateByPath,this.updateByPath,this.swapByPath,this.showByPath,this.hideByPath,this.swappedBefore]};t.prototype={validateByPath:null,updateByPath:null,swapByPath:null,showByPath:null,hideByPath:null,swappedBefore:null,all:null,toString:function(){var t,a,i,n,s="ResponderLists [";for(t in this)if(a=this[t],this.all.indexOf(a)>-1){i=[];for(n in a)i.push("["+n+" = "+a[n]+"]");s+="\n	["+t+": "+i.join(", ")+"], "}return s+="]"}},navigatorjs.ResponderLists=t}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.features=this.navigatorjs.features||{},function(){var t=null,a='<div class="debugConsole">Path: <input type="text" class="path" /><div class="pathRenderer"></div><div class="responders"><div class="names"></div><div class="status"></div></div></div>',i=!0,n=RegExp("[-_/A-Za-z0-9]"),s=null,e=null,r=null,o=null,h=null,g=null,v=null,u=null,l=function(a){switch(a.which){case 13:return a.preventDefault(),t.request(e.val()),void 0;case 8:case 0:return}var i=String.fromCharCode(a.which);n.test(i)||a.preventDefault(),f()},c=function(t){switch(String.fromCharCode(t.which)){case"~":case"$":case"`":i=!i,s.css({display:i?"":"none"})}},d=function(t){var a=$(t.target).data("responder-id");console.log("Responder",v[a])},f=function(){r.text(e.val()),e.css({width:r.width()})},p=function(t,a){v=a.respondersByID,u=a.statusByResponderID,S()},S=function(){var a,i,n,s,r=t.getCurrentState(),o="",l="";if(r){e.val(r.getPath()),f();for(a in v)i=v[a],n=u[a],(navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(i,"IHasStateTransition")||navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(i,"IHasStateInitialization"))&&(o+='<span data-responder-id="'+a+'">'+_(i)+"</span><br />",s=j(n),l+='<span style=" color:'+s+'; font-weight:bold;" data-responder-id="'+a+'">'+navigatorjs.transition.TransitionStatus.toString(n)+"</span><br />");h.html(o),g.html(l)}},_=function(t){var a=""+t;if("[object Object]"==a&&t.$el){var i=t.$el.prop("tagName").toLowerCase(),n=t.$el.attr("class").split(" ").join(".");a=i+"."+n}return a},j=function(t){var a="";switch(t){case navigatorjs.transition.TransitionStatus.UNINITIALIZED:a="#AAAAAA";break;case navigatorjs.transition.TransitionStatus.INITIALIZED:a="#FFFFFF";break;case navigatorjs.transition.TransitionStatus.HIDDEN:a="#FF0000";break;case navigatorjs.transition.TransitionStatus.APPEARING:case navigatorjs.transition.TransitionStatus.DISAPPEARING:a="#FFFF00";break;case navigatorjs.transition.TransitionStatus.SHOWN:a="#00FF00"}return a},I=function(i){t=i,s=$(a),e=s.find(".path"),r=s.find(".pathRenderer"),o=s.find(".responders"),h=o.find(".names"),g=o.find(".status"),s.css({backgroundColor:"#000000",color:"#AAAAAA",fontFamily:"Arial",fontSize:12,padding:5}),e.css({color:"#00FF00",backgroundColor:"transparent",fontFamily:"Arial",fontSize:12,minWidth:200,border:0}),r.attr("style",e.attr("style")),r.css({position:"absolute",height:0,overflowY:"hidden"}),h.css({display:"inline-block",color:"#FF9900",marginRight:15}),g.css({display:"inline-block"}),e.on("keypress",l),$(window).on("keypress",c),h.on("click",d),g.on("click",d),t.on(navigatorjs.NavigatorEvent.STATE_CHANGED,p),t.on(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,p)};I.prototype={get$El:function(){return s}},navigatorjs.features.DebugConsole=I}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){var t=function(t,a){this._navigator=t,this._injector=a,this._commandsByState={},this._verifiedCommandClasses={},this._navigator.add(this,""),this.initialize()};t.prototype={navigatorBehaviors:["IHasStateValidationOptional","IHasStateUpdate"],_navigator:null,_injector:null,_commandsByState:null,_verifiedCommandClasses:null,initialize:function(){},mapCommand:function(t,a,i,n){var s=void 0==i?!1:i,e=void 0==n?!1:n,r=navigatorjs.NavigationState.make(t),o=this._commandsByState[r.getPath()]||[];if(this._commandsByState[r.getPath()]=o,this._hasCommand(o,a))throw Error("Already mapped "+a+" to state "+r.getPath());this._verifyCommandClass(a),o.push({CommandClass:a,state:r,exactMatch:s,oneShot:e})},unmapCommand:function(t,a){var i,n,s=navigatorjs.NavigationState.make(t),e=this._commandsByState[s.getPath()]||[];for(this._commandsByState[s.getPath()]=e,i=e.length;--i>=0;)if(n=e[i],n.CommandClass==a)return e.splice(i,1),void 0},willValidate:function(t,a){return this.validate(t,a)},validate:function(t,a){var i,n,s,e,r,o;for(i in this._commandsByState)if(n=navigatorjs.NavigationState.make(i),a.contains(n))for(s=this._commandsByState[i],e=a.equals(n),r=s.length;--r>=0;)if(o=s[r],e||!o.exactMatch)return!0;return!1},updateState:function(t,a){var i,n,s,e,r,o,h;for(i in this._commandsByState)if(n=navigatorjs.NavigationState.make(i),a.contains(n))for(s=this._commandsByState[i],e=a.equals(n),r=s.length;--r>=0;)o=s[r],(e||!o.exactMatch)&&(this._injector.map("fullState").toValue(a),this._injector.map("truncatedState").toValue(a.subtract(o.state)),h=new o.CommandClass({injector:this._injector}),h.execute(),this._injector.unmap("fullState"),this._injector.unmap("truncatedState"),o.oneShot&&this.unmapCommand(o.state,o.CommandClass))},_hasCommand:function(t,a){var i,n,s=t.length;for(i=0;s>i;i++)if(n=t[i],n.CommandClass==a)return!0;return!1},_verifyCommandClass:function(t){if(!this._verifiedCommandClasses[t]){if(void 0===t.prototype.execute)throw Error("Command doesn't implement an execute method - "+t);this._verifiedCommandClasses[t]=!0}}},navigatorjs.integration.StateCommandMap=t}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){var t,a,i,n,s=function(s){navigatorjs.utils.AutoBind(this,this),t=!1,a="/",i=s,n=!1};s.prototype={supportsPushState:!!(window&&window.history&&window.history.pushState),usePushState:function(i){if(n)throw Error("Cannot switch to using push states after start was called");t=this.supportsPushState,a=i||a},isUsingPushState:function(){return t},start:function(){if(n)throw Error("Already started");n=!0,this._addListeners()},_addListeners:function(){t?$(window).on("popstate",this._onUrlChange):$(window).on("hashchange",this._onUrlChange);var a=navigatorjs.NavigatorEvent.STATE_CHANGED;i.on(a,this._onStateChanged)},_removeListeners:function(){$(window).off("popstate",this._onUrlChange),$(window).off("hashchange",this._onUrlChange)},setUrl:function(i){var n,s=this.getUrlState();t?(n=new navigatorjs.NavigationState(a+i),n.equals(s)?window.history.replaceState(null,"",n.getPath()):window.history.pushState(null,"",n.getPath())):(n=new navigatorjs.NavigationState(i),n.equals(s)||(window.location.hash=n.getPath()))},getRawUrl:function(){return t?this.parsePushStateUrl(window.location.pathname):this.parseHashUrl(window.location.hash)},getUrlState:function(){return new navigatorjs.NavigationState(this.getRawUrl())},_onStateChanged:function(){this.setUrl(i.getCurrentState().getPath())},_onUrlChange:function(){i.request(this.getUrlState())},resetUrl:function(){this.setUrl("")},parseHashUrl:function(t){return t.replace(/^#|$/g,"")},parsePushStateUrl:function(t){return t.replace(a,"")},dispose:function(){this._removeListeners()}},navigatorjs.integration.StateUrlSyncer=s}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){function t(t){var a,i=new navigatorjs.integration.ViewRecipe,n=t.length;for(a=0;n>a;a++)i.addState(navigatorjs.NavigationState.make(t[a]));return s.push(i),i}function a(t,a){var e,r,o,h,g,v,u,l=a.state,c=s.length;for(e=0;c>e;e++)for(r=s[e],o=r.getStates(),v=o.length,h=0;v>h;h++)g=o[h],l.contains(g)&&(u=r.getViewInstance(),u.navigatorBehaviors instanceof Array&&(i(r),n.add(u,g)))}function i(t){if(!t.isInstantiated()||!$.contains(document.documentElement,t.getViewInstance().$el)){var a,n=t.getParentRecipe(),r=e,o=t.getInsideSelector();n&&(n.isInstantiated()||i(n),r=n.getViewInstance().$el),null!=o&&(a=r.find(o),r=a.length>0?a.first():r);var h,g=s.indexOf(t)+1,v=s.length;for(g;v>g;g++)if(h=s[g],h.isInstantiated()&&h.getViewInstance().$el.parent()[0]==r[0])return h.getViewInstance().$el.before(t.getViewInstance().$el),void 0;r.append(t.getViewInstance().$el)}}var n=null,s=null,e=null,r=function(t,i){n=t,s=[],e=i||$("body"),n.on(navigatorjs.NavigatorEvent.STATE_REQUESTED,a)};r.prototype={mapState:function(){var a=[];return a=a.concat.apply(a,arguments),t(a)},get$Root:function(){return e}},navigatorjs.integration.StateViewMap=r}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){var t=function(){this._states=[],this._viewClass=null,this._viewArguments=[],this._viewInstance=null,this._insideSelector=null,this._parentRecipe=null};t.prototype={addState:function(t){var a,i,n=this._states.length;for(a=0;n>a;a++)if(i=this._states[a],i.getPath()==t.getPath())return;return this._states.push(t),this},getStates:function(){return this._states},toView:function(t){return this._viewClass=t,this},getViewClass:function(){return this._viewClass},getViewInstance:function(){if(!this.isInstantiated()){var t=this._viewArguments;switch(t.length){default:case 0:this._viewInstance=new this._viewClass;break;case 1:this._viewInstance=new this._viewClass(t[0]);break;case 2:this._viewInstance=new this._viewClass(t[0],t[1]);break;case 3:this._viewInstance=new this._viewClass(t[0],t[1],t[2]);break;case 4:this._viewInstance=new this._viewClass(t[0],t[1],t[2],t[3]);break;case 5:this._viewInstance=new this._viewClass(t[0],t[1],t[2],t[3],t[4])}}return this._viewInstance},isInstantiated:function(){return null!=this._viewInstance},withArguments:function(){if(arguments.length>5)throw Error("Uncle Bob says you want to use too many arguments");return this._viewArguments=arguments,this},inside:function(t){return this._insideSelector=t,this},getInsideSelector:function(){return this._insideSelector},withParent:function(t){return this._parentRecipe=t,this},getParentRecipe:function(){return this._parentRecipe}},navigatorjs.integration.ViewRecipe=t}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var a=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=a);a>i;i++)if(i in this&&this[i]===t)return i;return-1}),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.transition=this.navigatorjs.transition||{},function(){var t=function(t,a,i,n,s){this._responder=t,this._status=a,this._behavior=i,this._navigator=n,this._transitionNamespace=s,this._called=!1,navigatorjs.utils.AutoBind(this,this)};t.prototype={call:function(){if(this._called)throw Error("Illegal second call to transition complete. This instance is already prepared for garbage collection!");this._called=!0,this._transitionNamespace.notifyComplete(this._responder,this._status,this._behavior),this._responder=null,this._navigator=null,this._transitionNamespace=null}},navigatorjs.transition.TransitionCompleteDelegate=t}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.transition=this.navigatorjs.transition||{},this.navigatorjs.transition.TransitionStatus={},this.navigatorjs.transition.TransitionStatus.UNINITIALIZED=-2,this.navigatorjs.transition.TransitionStatus.INITIALIZED=-1,this.navigatorjs.transition.TransitionStatus.HIDDEN=1,this.navigatorjs.transition.TransitionStatus.APPEARING=2,this.navigatorjs.transition.TransitionStatus.SHOWN=3,this.navigatorjs.transition.TransitionStatus.SWAPPING=4,this.navigatorjs.transition.TransitionStatus.DISAPPEARING=5,this.navigatorjs.transition.TransitionStatus.toString=function(t){switch(t){case navigatorjs.transition.TransitionStatus.UNINITIALIZED:return"UNINITIALIZED";case navigatorjs.transition.TransitionStatus.INITIALIZED:return"INITIALIZED";case navigatorjs.transition.TransitionStatus.HIDDEN:return"HIDDEN";case navigatorjs.transition.TransitionStatus.APPEARING:return"APPEARING";case navigatorjs.transition.TransitionStatus.SHOWN:return"SHOWN";case navigatorjs.transition.TransitionStatus.SWAPPING:return"SWAPPING";case navigatorjs.transition.TransitionStatus.DISAPPEARING:return"DISAPPEARING"}return"UNKNOWN"},this.navigatorjs=this.navigatorjs||{},this.navigatorjs.transition=this.navigatorjs.transition||{},function(){var t=function(t,a,i,n,s){this._validatorResponder=t,this._truncatedState=a,this._fullState=i,this._navigator=n,this._validationNamespace=s,navigatorjs.utils.AutoBind(this,this)};t.prototype={call:function(){this._validationNamespace.notifyValidationPrepared(this._validatorResponder,this._truncatedState,this._fullState),this._validatorResponder=null,this._truncatedState=null,this._fullState=null,this._navigator=null,this._validationNamespace=null}},navigatorjs.transition.ValidationPreparedDelegate=t}(),this.navigatorjs=this.navigatorjs||{},this.navigatorjs.utils=this.navigatorjs.utils||{},this.navigatorjs.utils.AutoBind=function(t,a){var i,n;for(i in t)n=t[i],"function"==typeof n&&(t[i]=$.proxy(t[i],a))},this.navigatorjs=this.navigatorjs||{},this.navigatorjs.utils=this.navigatorjs.utils||{},this.navigatorjs.utils.Bind=function(t,a){var i=function(t,a){"function"==typeof t&&$.proxy(t,a)};if("array"==typeof t){var n,s=t.length;for(n=0;s>n;n++)i(t[n],a)}else i(t,a)};